(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{38:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var c=n(3),a=n.n(c),r=n(32),s=n.n(r),o=n(5),i=(n(38),n(19)),l=(n(39),n(57),n(58),n(41),i.a.initializeApp({apiKey:"AIzaSyDrICxenlVfwbaIN-KR2dE_MoYrzY1IRl8",authDomain:"hus-fb.firebaseapp.com",databaseURL:"https://hus-fb-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"hus-fb",storageBucket:"hus-fb.appspot.com",messagingSenderId:"282388248517",appId:"1:282388248517:web:b854c85aea206ed7663dac",measurementId:"G-91KBN4N2X3"}),i.a),u=i.a.auth(),d=i.a.firestore(),j=(i.a.storage(),i.a.database()),m=n(17),b=n(7),p=n(6),h=n.n(p),x=n(10),O=n(2),f=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(o.a)(r,2),i=s[0],l=s[1],d=Object(c.useState)(""),j=Object(o.a)(d,2),m=j[0],b=j[1],p=function(e){e.preventDefault();var t=e.target.name,n=e.target.value;switch(t){case"email":a(n);break;case"password":l(n)}},f=function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,u.signInWithEmailAndPassword(n,i);case 4:e.sent&&console.log("signed in"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.message),b(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("form",{onSubmit:f,className:"",children:[Object(O.jsx)("div",{className:"my-3",children:Object(O.jsx)("h4",{style:{fontWeight:"lighter"},children:"Log in to your account"})}),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("input",{type:"text",name:"email",placeholder:"Email",className:"my-3",onChange:p}),Object(O.jsx)("input",{type:"password",name:"password",placeholder:"Password",className:"my-3",onChange:p}),Object(O.jsx)("button",{type:"submit",name:"submit",className:"my-1",children:"Sign In"})]}),Object(O.jsx)("div",{children:m})]})},v=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(o.a)(r,2),i=s[0],l=s[1],d=Object(c.useState)(""),m=Object(o.a)(d,2),b=m[0],p=m[1],f=function(e){e.preventDefault();var t=e.target.name,n=e.target.value;switch(t){case"email":a(n);break;case"password":l(n);break;case"fullName":p(n)}},v=function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,u.createUserWithEmailAndPassword(n,i);case 3:if(!e.sent){e.next=9;break}return e.next=7,u.currentUser.updateProfile({displayName:b});case 7:return e.next=9,j.ref("users/"+u.currentUser.uid).set({email:n,fullName:b,createdAt:u.currentUser.metadata.creationTime,lastSignInTime:u.currentUser.metadata.lastSignInTime});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("form",{onSubmit:v,className:"row",children:[Object(O.jsx)("div",{className:"my-3",children:Object(O.jsx)("h4",{style:{fontWeight:"lighter"},children:"Become a Member!"})}),Object(O.jsxs)("div",{className:"d-grid mx-auto col-md-6 col-xl-5",children:[Object(O.jsx)("input",{required:!0,type:"text",name:"email",placeholder:"Email",className:"m-3",onChange:f}),Object(O.jsx)("input",{required:!0,type:"password",name:"password",placeholder:"Password",className:"m-3 ",onChange:f}),Object(O.jsx)("input",{required:!0,type:"text",name:"fullName",placeholder:"Full Name",className:"m-3 ",onChange:f}),Object(O.jsx)("button",{type:"submit",name:"submit",className:"my-3 col-7 d-block mx-auto",children:"Sign Up"})]})]})},g=function(){var e=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,c,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=t.target.name,e.t0=n,e.next="google"===e.t0?5:"facebook"===e.t0?10:12;break;case 5:return c=new l.auth.GoogleAuthProvider,e.next=8,u.signInWithPopup(c);case 8:return a=e.sent,e.abrupt("break",13);case 10:return alert("Not yet implemented"),e.abrupt("break",13);case 12:return e.abrupt("break",13);case 13:if(!a){e.next=16;break}return e.next=16,j.ref("users/"+u.currentUser.uid).update({email:u.currentUser.email,fullName:u.currentUser.displayName,createdAt:u.currentUser.metadata.creationTime,lastSignInTime:u.currentUser.metadata.lastSignInTime});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{name:"google",onClick:e,className:"transparent-button text-dark",children:"Google"}),Object(O.jsx)("button",{name:"facebook",onClick:e,className:"transparent-button text-dark",children:"Facebook"})]})},w=function(){var e=Object(c.useState)(!0),t=Object(o.a)(e,2),n=t[0],a=t[1],r=function(){return n?Object(O.jsx)(f,{}):n?Object(O.jsx)("div",{children:"Error"}):Object(O.jsx)(v,{})};return Object(O.jsxs)("div",{id:"login-form",className:"col-lg-7 col-md-8 col-sm-10 col-xs-12 col-xl-6 text-white mx-auto text-center",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{className:"text-center mt-5",children:"HUS"}),Object(O.jsx)("h3",{className:"monte",children:"Have your say"})]}),Object(O.jsx)("div",{children:Object(O.jsx)(r,{})}),Object(O.jsx)(g,{isSignIn:n}),Object(O.jsxs)("div",{className:"my-3 d-grid",children:[Object(O.jsx)("span",{style:{fontWeight:"bold"},children:n?"Not a member yet?":"Are you a member?"}),Object(O.jsx)("button",{className:" mb-3 transparent-button",onClick:function(){return a(!n)},children:n?"Create Account":"Sign In"})]})]})},N=function(e){e.isLoggedIn;return Object(O.jsx)("section",{id:"auth",className:"container-fluid",children:Object(O.jsx)("div",{className:"row",style:{minHeight:"100vh",alignContent:"center"},children:Object(O.jsx)(w,{})})})},y=n(21),D=n(20),k=function(e){e.setPopPost;var t,n=Object(c.useState)(null),a=Object(o.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(null),l=Object(o.a)(i,2),j=l[0],m=l[1],b=Object(c.useState)(null),p=Object(o.a)(b,2),f=(p[0],p[1],Object(c.useState)("up")),v=Object(o.a)(f,2),g=v[0],w=v[1],N=function(e){e.preventDefault();var t=e.target.name,n=e.target.value;switch(t){case"url":s(n);break;case"comment":m(n)}},k=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n={url:r,authorEmail:u.currentUser.email,author:u.currentUser.displayName,authorID:u.currentUser.uid,comment:[{c_author_name:u.currentUser.displayName,c_authorID:u.currentUser.uid,text:j,c_up:0,c_down:0,c_id:"C_"+u.currentUser.uid+Date.now(),c_createdAt:Date.now()}],up:0,down:0,upAndDown:g,createdDate:Date.now()},c=u.currentUser.uid+Date.now(),e.next=6,d.collection("post").doc(c).set(n);case 6:alert("Post uploaded successfully"),window.location.reload(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),I=function(e){switch(e.preventDefault(),e.target.name){case"up":try{document.getElementById("up").classList.add("active-white"),document.getElementById("down").classList.remove("active-white"),w("up")}catch(t){console.log(t)}break;case"down":try{document.getElementById("down").classList.add("active-white"),document.getElementById("up").classList.remove("active-white"),w("down")}catch(t){console.log(t)}}};return Object(O.jsxs)("div",{id:"post-field",className:"row",children:[Object(O.jsx)("div",{children:r&&""!==r&&Object(O.jsx)(D.a,{url:r})}),Object(O.jsx)("div",{className:"col-12 mt-3",children:Object(O.jsxs)("form",{onSubmit:k,children:[Object(O.jsx)("input",(t={required:!0,type:"text"},Object(y.a)(t,"required",!0),Object(y.a)(t,"onChange",N),Object(y.a)(t,"name","url"),Object(y.a)(t,"placeholder","Drag & Drop the article"),Object(y.a)(t,"style",{padding:"30px",borderRadius:"8px"}),t)),Object(O.jsxs)("div",{className:"d-grid mt-3",children:[Object(O.jsx)("input",{required:!0,type:"text",onChange:N,name:"comment",placeholder:"comment"}),Object(O.jsxs)("div",{className:"d-flex",children:[Object(O.jsx)("button",{id:"up",name:"up",className:"transparent-button active-white",onClick:I,style:{color:"red"},children:"AGREE"}),Object(O.jsx)("button",{id:"down",name:"down",className:"transparent-button",onClick:I,style:{color:"blue"},children:"DISAGREE"})]})]}),Object(O.jsx)("button",{name:"submit",className:"transparent-button",children:"Post"})]})})]})},I=function(){var e=Object(c.useState)(!0),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(null),s=Object(o.a)(r,2),i=s[0],l=s[1],j=0,b=function(){var e=Object(x.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.collection("post").get();case 3:t=e.sent,n=[],t.forEach((function(e){var t={postID:e.id,author:e.data().author,authorID:e.data().authorID,comment:e.data().comment,createdDate:e.data().createdDate,title:e.data().title,up:e.data().up,down:e.data().down,upAndDown:e.data().upAndDown,url:e.data().url};n.push(t),n.sort((function(e,t){return t.createdDate-e.createdDate}))})),l(n),a(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(x.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!window.confirm("Really Delete?")){e.next=8;break}return n=t.target.id,e.next=5,d.collection("post").doc(n).delete();case 5:e.sent,console.log("Deleted Post"),window.location.reload();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e){var t=e.author,n=e.comment,c=e.url,a=e.up,r=e.down,s=e.upAndDown,o=e.createdDate,i=e.authorID,l=e.postID,d=e.comment_author,j=new Date(o).toLocaleDateString("en-US"),b=!1;return u.currentUser&&(b=Boolean(i===u.currentUser.uid)),"up"===s?a++:r++,Object(O.jsxs)("div",{className:"border p-3 my-3 post-card",children:[Object(O.jsx)("div",{className:"row",children:Object(O.jsx)("div",{className:"col-md-5",children:Object(O.jsx)("div",{className:"",style:{float:"right"},children:b&&Object(O.jsx)("button",{id:l,onClick:p,className:"transparent-button",style:{color:"red"},children:"Delete"})})})}),Object(O.jsxs)("div",{className:"row",children:[Object(O.jsxs)("div",{className:"border col-md-6",style:{minHeight:"300px"},children:[Object(O.jsx)(D.a,{url:c}),";"]}),Object(O.jsxs)("div",{className:"col-md-6",children:[Object(O.jsxs)("div",{style:{fontSize:"small"},children:[Object(O.jsx)("p",{className:"m-0",children:t}),Object(O.jsxs)("p",{children:["Date Created: ",j]})]}),Object(O.jsxs)("div",{children:[Object(O.jsxs)("p",{children:["Agree: ",a]}),Object(O.jsxs)("p",{children:["Disagree: ",r]})]}),Object(O.jsx)("p",{children:"Top comment"}),Object(O.jsxs)("div",{className:"comment-box",children:[Object(O.jsxs)("p",{style:{fontSize:"small",float:"right"},children:["Author: ",d]}),Object(O.jsxs)("p",{style:{fontWeight:"bold"},children:['"',n,'"']})]}),Object(O.jsx)(m.b,{to:"/post/".concat(l),children:"View More"})]})]}),Object(O.jsx)("div",{className:"col-md-12"})]})};return Object(c.useEffect)((function(){b()}),[n]),Object(O.jsx)("div",{children:n?"Loading...":i.map((function(e){j++,e.comment.sort((function(e,t){return e.c_up-t.c_up}));var t=e.comment[0].text,n=e.comment[0].c_author_name;return Object(O.jsx)(f,{id:e.postID,url:e.url,title:e.title,authorID:e.authorID,comment:t,comment_author:n,author:e.author,postID:e.postID,createdDate:e.createdDate,up:e.up,down:e.down,upAndDown:e.upAndDown},j)}))})},S=function(e){var t=e.isLoggedIn,n=Object(c.useState)(!1),a=Object(o.a)(n,2),r=a[0],s=a[1];return Object(O.jsx)("section",{className:"container-fluid",children:Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"col-md-3"}),Object(O.jsxs)("div",{className:"col-md-6",children:[Object(O.jsx)("div",{className:"text-center py-3",children:Object(O.jsxs)("div",{id:"post-button",children:[Object(O.jsx)("button",{onClick:function(e){e.preventDefault(),s(!r),t||alert("Please login first")},className:"transparent-button text-dark",children:"What's on your mind?"}),r&&t&&Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(k,{setPopPost:s})})]})}),Object(O.jsx)(I,{})]}),Object(O.jsx)("div",{className:"col-md-3"})]})})},C=function(e){var t=e.isLoggedIn;return Object(O.jsxs)("header",{className:"row",children:[Object(O.jsx)("h1",{className:"text-center mt-5",children:Object(O.jsx)(m.b,{to:"/",id:"logo",className:"text-dark",children:"HUS"})}),Object(O.jsxs)("nav",{className:"col-12 d-md-flex mt-3 justify-content-center",children:[Object(O.jsxs)("ul",{className:"d-md-flex my-0",children:[Object(O.jsx)("li",{className:"mx-5 p-2",children:"National"}),Object(O.jsx)("li",{className:"mx-5 p-2",children:"International"}),Object(O.jsx)("li",{className:"mx-5 p-2",children:"Sports"}),Object(O.jsx)("li",{className:"mx-5 p-2",children:"Business"}),Object(O.jsx)("li",{className:"mx-5 p-2",children:"Entertainment"})]}),t?Object(O.jsx)("button",{onClick:function(){u.signOut(),window.location.reload()},className:"transparent-button",children:"Logout"}):Object(O.jsx)(m.b,{to:"/login",className:"p-2 login-button",children:"Login"})]})]})},U=function(e){var t=e.postID,n=Object(c.useState)(null),a=Object(o.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(!1),l=Object(o.a)(i,2),j=l[0],m=l[1],b=function(){var e=function(){var e=Object(x.a)(h.a.mark((function e(n){var c,a,s,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),c=document.getElementById("writeComment").value,a=u.currentUser,s={c_authorID:a.uid,c_author_name:a.displayName,c_createdAt:Date.now(),c_down:0,c_up:0,c_id:"C_"+a.uid+Date.now(),text:c},r.push(s),e.next=7,d.collection("post").doc(t.id);case 7:return o=e.sent,e.prev=8,e.next=11,o.update({comment:r});case 11:console.log("Comment Uploaded"),m(!j),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),console.log(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)("div",{className:"col-md-12 border mt-5 p-3 text-white text-center",style:{backgroundColor:"#242424"},children:u.currentUser?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("button",{className:"transparent-button",style:{color:"lightBlue"},children:"Up"}),Object(O.jsx)("button",{className:"transparent-button",style:{color:"yellow"},children:"down"}),Object(O.jsx)("h3",{children:"Write comment"}),Object(O.jsxs)("form",{onSubmit:e,children:[Object(O.jsx)("textarea",{id:"writeComment",name:"writeComment",required:!0,rows:"4",cols:"50"}),Object(O.jsx)("button",{name:"submit",children:"Comment"})]})]}):Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("h3",{children:"Please login to comment"})})})},p=function(){var e=Object(x.a)(h.a.mark((function e(n){var c,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n.preventDefault(),c=n.target.parentElement.id,e.prev=2,a=0;a<r.length;a++)r[a].c_id===c&&r.splice(a,1);if(!window.confirm("Are you sure to delete?")){e.next=9;break}return e.next=7,d.collection("post").doc(t.id).update({comment:r});case 7:m(!j),console.log("Comment deleted");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),alert(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){(function(){var e=Object(x.a)(h.a.mark((function e(){var n,c,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.collection("post").doc(t.id);case 2:return n=e.sent,e.next=5,n.get();case 5:c=e.sent,a=c.data().comment,s(a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[j]),Object(O.jsxs)("div",{children:[r&&r.map((function(e,t){var n,c=new Date(e.c_createdAt).toLocaleDateString("en-US");return u.currentUser&&(n=e.c_authorID.includes(u.currentUser.uid)),Object(O.jsxs)("div",{id:e.c_id,className:"comment-box my-3",children:[Object(O.jsxs)("p",{children:[" ",e.c_author_name," "]}),Object(O.jsxs)("p",{children:[" up: ",e.c_up," "]}),Object(O.jsxs)("p",{children:[" down: ",e.c_down," "]}),Object(O.jsxs)("p",{children:["Comment: ",e.text]}),Object(O.jsxs)("p",{children:["Created At: ",c," "]}),Object(O.jsx)("button",{className:"transparent-button",onClick:function(){return alert("not implemented")},children:"Up"}),Object(O.jsx)("button",{className:"transparent-button",onClick:function(){return alert("not implemented")},children:"Down"}),n&&Object(O.jsx)("button",{className:"transparent-button",style:{color:"red"},onClick:p,children:"Delete"})]},t)})),Object(O.jsx)(b,{})]})},_=function(){var e=Object(b.g)(),t=Object(c.useState)(!1),n=Object(o.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(null),i=Object(o.a)(s,2),l=i[0],u=i[1],j=Object(c.useState)(null),m=Object(o.a)(j,2),p=(m[0],m[1],function(){var t=Object(x.a)(h.a.mark((function t(){var n,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.collection("post").doc(e.id).get();case 2:(n=t.sent)?(c=n.data(),u(c),r(!0)):console.log("No Such Document in Firestore");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()),f=function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"col-md-6 border",children:Object(O.jsx)(D.a,{url:l.url})}),Object(O.jsx)("div",{className:"col-md-6 border",children:Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{style:{fontSize:"small"},children:[Object(O.jsxs)("p",{className:"m-0",children:["Created by: ",l.author]}),Object(O.jsxs)("p",{children:["Date Created: ",l.date]})]}),Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"d-flex",children:[Object(O.jsxs)("p",{children:["Agree: ",l.up]}),Object(O.jsx)("button",{className:"mx-3 tr",children:"+"})]}),Object(O.jsxs)("div",{className:"d-flex",children:[Object(O.jsxs)("p",{children:["Disagree: ",l.down]}),Object(O.jsx)("button",{className:"mx-3 tr",children:"-"})]})]})]})}),Object(O.jsx)("div",{className:"col-md-10 mt-4 d-block mx-auto",children:Object(O.jsx)(U,{postID:e})})]})};return Object(c.useEffect)((function(){p()}),[a]),Object(O.jsx)("section",{className:"container",children:Object(O.jsx)("div",{className:"row",children:a&&Object(O.jsx)(f,{})})})},A=function(e){var t=e.isLoggedIn;e.userObj;return Object(O.jsx)(m.a,{children:Object(O.jsxs)(b.d,{children:[Object(O.jsxs)(b.b,{exact:!0,path:"/",children:[Object(O.jsx)(C,{isLoggedIn:t}),Object(O.jsx)(S,{isLoggedIn:t})]}),Object(O.jsxs)(b.b,{exact:!0,path:"/login",children:[Object(O.jsx)(N,{isLoggedIn:t}),t&&Object(O.jsx)(b.a,{to:"/"})]}),Object(O.jsxs)(b.b,{path:"/post/:id",children:[Object(O.jsx)(C,{isLoggedIn:t}),Object(O.jsx)(_,{})]})]})})};var E=function(){var e=Object(c.useState)(!0),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(null),s=Object(o.a)(r,2),i=s[0],l=s[1];return Object(c.useEffect)((function(){u.onAuthStateChanged((function(e){e&&(l(e),j.ref("users/"+e.uid).update({lastSignInTime:e.metadata.lastSignInTime})),a(!1)}))}),[i]),Object(O.jsx)(O.Fragment,{children:n?Object(O.jsx)(O.Fragment,{children:"Loading..."}):Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(A,{isLoggedIn:Boolean(i),userObj:i})})})};n(55);s.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(E,{})}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.9746a454.chunk.js.map