(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{33:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(3),c=a.n(n),r=a(27),s=a.n(r),i=a(5),l=(a(33),a(18)),o=(a(34),a(50),a(51),a(36),l.a.initializeApp({apiKey:"AIzaSyDrICxenlVfwbaIN-KR2dE_MoYrzY1IRl8",authDomain:"hus-fb.firebaseapp.com",databaseURL:"https://hus-fb-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"hus-fb",storageBucket:"hus-fb.appspot.com",messagingSenderId:"282388248517",appId:"1:282388248517:web:b854c85aea206ed7663dac",measurementId:"G-91KBN4N2X3"}),l.a),u=l.a.auth(),d=l.a.firestore(),j=(l.a.storage(),l.a.database()),b=a(21),m=a(6),h=a(11),p=a.n(h),x=a(16),O=a(2),f=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),l=s[0],o=s[1],d=Object(n.useState)(""),j=Object(i.a)(d,2),b=j[0],m=j[1],h=function(e){e.preventDefault();var t=e.target.name,a=e.target.value;switch(t){case"email":c(a);break;case"password":o(a)}},f=function(){var e=Object(x.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,u.signInWithEmailAndPassword(a,l);case 4:e.sent&&console.log("signed in"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.message),m(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("form",{onSubmit:f,className:"",children:[Object(O.jsx)("div",{className:"my-3",children:Object(O.jsx)("h4",{style:{fontWeight:"lighter"},children:"Log in to your account"})}),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("input",{type:"text",name:"email",placeholder:"Email",className:"my-3",onChange:h}),Object(O.jsx)("input",{type:"password",name:"password",placeholder:"Password",className:"my-3",onChange:h}),Object(O.jsx)("button",{type:"submit",name:"submit",className:"my-1",children:"Sign In"})]}),Object(O.jsx)("div",{children:b})]})},g=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),l=s[0],o=s[1],d=Object(n.useState)(""),b=Object(i.a)(d,2),m=b[0],h=b[1],f=function(e){e.preventDefault();var t=e.target.name,a=e.target.value;switch(t){case"email":c(a);break;case"password":o(a);break;case"fullName":h(a)}},g=function(){var e=Object(x.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,u.createUserWithEmailAndPassword(a,l);case 3:if(!e.sent){e.next=9;break}return e.next=7,u.currentUser.updateProfile({displayName:m});case 7:return e.next=9,j.ref("users/"+u.currentUser.uid).set({email:a,fullName:m,createdAt:u.currentUser.metadata.creationTime,lastSignInTime:u.currentUser.metadata.lastSignInTime});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("form",{onSubmit:g,className:"row",children:[Object(O.jsx)("div",{className:"my-3",children:Object(O.jsx)("h4",{style:{fontWeight:"lighter"},children:"Become a Member!"})}),Object(O.jsxs)("div",{className:"d-grid mx-auto col-md-6 col-xl-5",children:[Object(O.jsx)("input",{required:!0,type:"text",name:"email",placeholder:"Email",className:"m-3",onChange:f}),Object(O.jsx)("input",{required:!0,type:"password",name:"password",placeholder:"Password",className:"m-3 ",onChange:f}),Object(O.jsx)("input",{required:!0,type:"text",name:"fullName",placeholder:"Full Name",className:"m-3 ",onChange:f}),Object(O.jsx)("button",{type:"submit",name:"submit",className:"my-3 col-7 d-block mx-auto",children:"Sign Up"})]})]})},v=function(){var e=function(){var e=Object(x.a)(p.a.mark((function e(t){var a,n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=t.target.name,e.t0=a,e.next="google"===e.t0?5:"facebook"===e.t0?10:12;break;case 5:return n=new o.auth.GoogleAuthProvider,e.next=8,u.signInWithPopup(n);case 8:return c=e.sent,e.abrupt("break",13);case 10:return alert("Not yet implemented"),e.abrupt("break",13);case 12:return e.abrupt("break",13);case 13:if(!c){e.next=16;break}return e.next=16,j.ref("users/"+u.currentUser.uid).update({email:u.currentUser.email,fullName:u.currentUser.displayName,createdAt:u.currentUser.metadata.creationTime,lastSignInTime:u.currentUser.metadata.lastSignInTime});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{name:"google",onClick:e,className:"transparent-button text-dark",children:"Google"}),Object(O.jsx)("button",{name:"facebook",onClick:e,className:"transparent-button text-dark",children:"Facebook"})]})},N=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],c=t[1],r=function(){return a?Object(O.jsx)(f,{}):a?Object(O.jsx)("div",{children:"Error"}):Object(O.jsx)(g,{})};return Object(O.jsxs)("div",{id:"login-form",className:"col-lg-7 col-md-8 col-sm-10 col-xs-12 col-xl-6 text-white mx-auto text-center",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{className:"text-center mt-5",children:"HUS"}),Object(O.jsx)("h3",{className:"monte",children:"Have your say"})]}),Object(O.jsx)("div",{children:Object(O.jsx)(r,{})}),Object(O.jsx)(v,{isSignIn:a}),Object(O.jsxs)("div",{className:"my-3 d-grid",children:[Object(O.jsx)("span",{style:{fontWeight:"bold"},children:a?"Not a member yet?":"Are you a member?"}),Object(O.jsx)("button",{className:" mb-3 transparent-button",onClick:function(){return c(!a)},children:a?"Create Account":"Sign In"})]})]})},y=function(e){e.isLoggedIn;return Object(O.jsx)("section",{id:"auth",className:"container-fluid",children:Object(O.jsx)("div",{className:"row",style:{minHeight:"100vh",alignContent:"center"},children:Object(O.jsx)(N,{})})})},w=function(e){var t=e.setPopPost,a=Object(n.useState)(null),c=Object(i.a)(a,2),r=c[0],s=c[1],l=Object(n.useState)(null),o=Object(i.a)(l,2),b=o[0],m=o[1],h=Object(n.useState)(null),f=Object(i.a)(h,2),g=f[0],v=f[1],N=Object(n.useState)(null),y=Object(i.a)(N,2),w=y[0],S=y[1],k=function(e){e.preventDefault();var t=e.target.name,a=e.target.value;switch(t){case"url":s(a);break;case"title":m(a);break;case"content":v(a)}},I=function(){var e=Object(x.a)(p.a.mark((function e(a){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,j.ref("users/"+u.currentUser.uid).on("value",(function(e){var t=e.val().email;S(t)}));case 3:return n={url:r,title:b,authorEmail:w,author:u.currentUser.displayName,authorID:u.currentUser.uid,content:g,createdDate:Date.now()},e.prev=4,c=u.currentUser.uid+Date.now(),e.next=8,d.collection("post").doc(c).set(n);case 8:alert("Post uploaded successfully"),t(!1),window.location.reload(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)("div",{id:"post-popup",className:"row",style:{backgroundColor:"#151515"},children:Object(O.jsxs)("div",{className:"col-12 mt-3 text-white",children:[Object(O.jsx)("button",{className:"transparent-button",style:{float:"right"},onClick:function(){return t(!1)},children:"Close"}),Object(O.jsx)("h3",{className:"mt-5",children:"Post Here"}),Object(O.jsxs)("form",{onSubmit:I,children:[Object(O.jsx)("input",{required:!0,type:"text",onChange:k,name:"url",placeholder:"url"}),Object(O.jsx)("input",{required:!0,type:"text",onChange:k,name:"title",placeholder:"title"}),Object(O.jsx)("input",{required:!0,type:"text",onChange:k,name:"content",placeholder:"content"}),Object(O.jsx)("button",{name:"submit",children:"Subimt"})]})]})})},S=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(null),s=Object(i.a)(r,2),l=s[0],o=s[1],j=0,b=function(){var e=Object(x.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.collection("post").get();case 3:t=e.sent,a=[],t.forEach((function(e){var t={postID:e.id,author:e.data().author,authorID:e.data().authorID,content:e.data().content,createdDate:e.data().createdDate,title:e.data().title,url:e.data().url};a.push(t)})),o(a),c(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),m=function(e){window.confirm("Really Delete?")&&alert("Not implemented yet")},h=function(e){var t=e.title,a=e.author,n=e.content,c=(e.url,e.createdDate),r=e.authorID,s=new Date(c).toLocaleDateString("en-US"),i=!1;return u.currentUser&&(i=Boolean(r===u.currentUser.uid)),Object(O.jsxs)("div",{className:"border p-3 my-3 post-card",children:[Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"col-md-7",children:Object(O.jsx)("h4",{children:t})}),Object(O.jsx)("div",{className:"col-md-5",children:Object(O.jsx)("div",{className:"",style:{float:"right"},children:i&&Object(O.jsx)("button",{onClick:m,className:"transparent-button",style:{color:"red"},children:"Delete"})})})]}),Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"border col-md-6",style:{minHeight:"300px"},children:"URL here"}),Object(O.jsxs)("div",{className:"col-md-6",children:[Object(O.jsxs)("div",{style:{fontSize:"small"},children:[Object(O.jsx)("p",{className:"m-0",children:a}),Object(O.jsxs)("p",{children:["Date Created: ",s]})]}),Object(O.jsxs)("p",{style:{fontWeight:"bold"},children:['"',n,'"']}),Object(O.jsx)("p",{children:"Top 3 comments"}),Object(O.jsx)("button",{className:"transparent-button",onClick:function(){return alert("Not implemented")},children:"View More"})]})]}),Object(O.jsx)("div",{className:"col-md-12"})]})};return Object(n.useEffect)((function(){b()}),[a]),Object(O.jsx)("div",{children:a?"Loading...":l.map((function(e){return j++,Object(O.jsx)(h,{id:e.postID,url:e.url,title:e.title,authorID:e.authorID,content:e.content,author:e.author,postID:e.postID,createdDate:e.createdDate},j)}))})},k=function(e){var t=e.isLoggedIn,a=Object(n.useState)(!1),c=Object(i.a)(a,2),r=c[0],s=c[1];Object(n.useEffect)((function(){t&&(r?document.querySelector("#dark-bg").classList.add("on-popup"):document.querySelector("#dark-bg").classList.remove("on-popup"))}),[r]);return Object(O.jsx)("section",{className:"container-fluid",children:Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"col-md-3"}),Object(O.jsxs)("div",{className:"col-md-6",children:[Object(O.jsxs)("div",{className:"text-center py-3",children:[Object(O.jsx)("div",{id:"post-button",children:Object(O.jsx)("button",{onClick:function(e){e.preventDefault(),s(!0),t||alert("Please login first")},className:"transparent-button text-dark",children:"What's on your mind?"})}),Object(O.jsx)("div",{id:"dark-bg"}),r&&t&&Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(w,{setPopPost:s})})]}),Object(O.jsx)(S,{})]}),Object(O.jsx)("div",{className:"col-md-3"})]})})},I=function(e){var t=e.isLoggedIn;return Object(O.jsxs)("header",{className:"row",children:[Object(O.jsx)("h1",{className:"text-center mt-5",children:"HUS"}),Object(O.jsxs)("nav",{className:"col-12 d-md-flex mt-3 justify-content-center",children:[Object(O.jsxs)("ul",{className:"d-md-flex my-0",children:[Object(O.jsx)("li",{className:"mx-5 p-2",children:"National"}),Object(O.jsx)("li",{className:"mx-5 p-2",children:"International"}),Object(O.jsx)("li",{className:"mx-5 p-2",children:"Sports"}),Object(O.jsx)("li",{className:"mx-5 p-2",children:"Business"}),Object(O.jsx)("li",{className:"mx-5 p-2",children:"Entertainment"})]}),t?Object(O.jsx)("button",{onClick:function(){u.signOut(),window.location.reload()},className:"transparent-button",children:"Logout"}):Object(O.jsx)(b.b,{to:"/login",className:"p-2 login-button",children:"Login"})]})]})},D=function(e){var t=e.isLoggedIn;e.userObj;return Object(O.jsx)(b.a,{children:Object(O.jsxs)(m.d,{children:[Object(O.jsxs)(m.b,{exact:!0,path:"/",children:[Object(O.jsx)(I,{isLoggedIn:t}),Object(O.jsx)(k,{isLoggedIn:t})]}),Object(O.jsxs)(m.b,{exact:!0,path:"/login",children:[Object(O.jsx)(y,{isLoggedIn:t}),t&&Object(O.jsx)(m.a,{to:"/"})]})]})})};var C=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(null),s=Object(i.a)(r,2),l=s[0],o=s[1];return Object(n.useEffect)((function(){u.onAuthStateChanged((function(e){e&&(o(e),j.ref("users/"+e.uid).update({lastSignInTime:e.metadata.lastSignInTime})),c(!1)}))}),[l]),Object(O.jsx)(O.Fragment,{children:a?Object(O.jsx)(O.Fragment,{children:"Loading..."}):Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(D,{isLoggedIn:Boolean(l),userObj:l})})})};a(48);s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(C,{})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.b53891cd.chunk.js.map